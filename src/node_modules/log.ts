const { inspect } = require("util");
import { CommandoMessage } from "discord.js-commando"

const levels: { [level: string]: any } = {
	info: console.log,
	error: console.error,
	warn: console.warn,
};

const logger = {
	log: (level = "log", ...data: any[]) => {
		const logMessage = `[${new Date().toISOString()}] [${level}] ${data.map(data => typeof data == "string" ? data : inspect(data)).join(" ")}`;

		levels[level](logMessage);
	},
	info: function(...data: any[]) { logger.log("info", ...data); },
	error: function(...data: any[]) { logger.log("error", ...data); },
	warn: function(...data: any[]) { logger.log("warn", ...data); },
	errorReply: (reason: string, message: CommandoMessage) => (...data: any[]) => {
		logger.error(...data);
		return message.reply(`Failed to ${reason}.`);
	}
};

export default logger;